;/*FB_PKG_DELIM*/

__d("PolarisPostCommentInputRevampedMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"connections"},b={defaultValue:null,kind:"LocalArgument",name:"media_id"},c={defaultValue:null,kind:"LocalArgument",name:"request_data"},d=[{kind:"Variable",name:"media_id",variableName:"media_id"},{kind:"Variable",name:"request_data",variableName:"request_data"}],e={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null};return{fragment:{argumentDefinitions:[a,b,c],kind:"Fragment",metadata:null,name:"PolarisPostCommentInputRevampedMutation",selections:[{alias:null,args:d,concreteType:"XDTAddCommentWebResponse",kind:"LinkedField",name:"xdt_web__comments__media_id__add_queryable",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.created_at"},{kind:"RequiredField",field:f,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.pk"},{kind:"RequiredField",field:g,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.text"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[f,h,i,j],storageKey:null},action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.user"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,c,b],kind:"Operation",name:"PolarisPostCommentInputRevampedMutation",selections:[{alias:null,args:d,concreteType:"XDTAddCommentWebResponse",kind:"LinkedField",name:"xdt_web__comments__media_id__add_queryable",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"node",plural:!1,selections:[e,f,g,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[f,h,i,j,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,filters:null,handle:"prependNode",key:"",kind:"LinkedHandle",name:"node",handleArgs:[{kind:"Variable",name:"connections",variableName:"connections"},{kind:"Literal",name:"edgeTypeName",value:"XDTGetCommentsResponseEdge"}]}],storageKey:null}]},params:{id:"6176933725662610",metadata:{},name:"PolarisPostCommentInputRevampedMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PolarisPostCommentInputRevamped.react",["CometRelay","PolarisPendingCommentState","PolarisPostCommentInput.react","PolarisPostCommentInputRevampedMutation.graphql","PolarisPostDetailsSectionProvider.react","Promise","polarisGetXDTCommentDict","react","usePolarisCommentInputRevamped","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("PolarisPostCommentInputRevampedMutation.graphql");function a(a){var e=a.adInfo,f=a.isLoggedIn,g=a.isRevampedMobileInput;g=g===void 0?!1:g;var h=a.isSidecar,k=a.isVideo,l=a.ownerID,m=a.postID,n=a.postOwnerUsername,o=a.replyingToBarWithinInput;o=o===void 0?!1:o;a=a.viewerProfilePicture;var p=d("PolarisPostDetailsSectionProvider.react").usePolarisPostDetailsSectionProvider(),q=c("usePolarisSelector")(function(a){return(a=a.pendingComments[m])!=null?a:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT}),r=d("CometRelay").useMutation(j),s=r[0];r=c("usePolarisCommentInputRevamped")(m,h,k);var t=r.onCommit,u=r.onComplete,v=r.onError;h=function a(e,f,g,h){t();var i=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__connection",{data:{},media_id:m});g=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__parent_comment_id__child_comments__connection",{media_id:m,parent_comment_id:(g=g)!=null?g:f});s({onCompleted:function(a){u(a.xdt_web__comments__media_id__add_queryable.node.text,a.xdt_web__comments__media_id__add_queryable.node.pk,l,h,q.repliedToCommentAuthorId,q.repliedToCommentParentId)},onError:function(){v(a,e,h,q.repliedToCommentAuthorId,q.repliedToCommentParentId)},updater:function(a){var b;if(f==null)return;a=c("polarisGetXDTCommentDict")(a,f);b=(b=a==null?void 0:a.getValue("child_comment_count"))!=null?b:0;a==null?void 0:a.setValue(Number(b)+1,"child_comment_count")},variables:{connections:[f==null?i:g],media_id:m,request_data:{comment_text:e,replied_to_comment_id:f}}});return b("Promise").resolve()};return i.jsx(c("PolarisPostCommentInput.react"),{adInfo:e,analyticsContext:p,canViewerProvideFeedback:!0,forceTextareaAutosize:!1,hasPostButton:!0,hasRichCommentInput:!0,id:m,inModal:!1,isLoggedIn:f,isRevampedMobileInput:g,isRevampVersion:!0,isVideo:k,onCommentSubmitOverride:h,ownerId:l,postOwnerUsername:n,replyingToBarWithinInput:o,viewerProfilePicture:(r=a)!=null?r:""})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("isValidURL",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b===void 0&&(b=!1);var c=/^(([\w-]+\.)+(xn--[\w-]+|\w+)|\[([\da-f]{0,4}:)*(?:[\da-f]{1,4}|(?:(?:\d{1,3}\.){3}\d{1,3}))\])(:[0-9]+)?([/\?].*)?$/,d=/^http(s)?:\/\/(([\w-]+\.)+(xn--[\w-]+|\w+)|\[([\da-f]{0,4}:)*(?:[\da-f]{1,4}|(?:(?:\d{1,3}\.){3}\d{1,3}))\])(:[0-9]+)?([/\?].*)?$/;return b?a.match(d)!==null:a.match(c)!==null||a.match(d)!==null}f["default"]=a}),66);